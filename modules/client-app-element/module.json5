{
  "name":"client-app-element",
  "version":"1.0.0",
  "component": true,
  "description":"Element for js-kit",
  "author":"Tony Mobily",
  "moduleDependencies":[
    "client-app-frame"
  ],
  "position": 20,
  "extraCopyDirectory": "common",
  "manipulate":{
    "text":{
      "<%=vars.newElementInfo.newElementFile%>":[
        {
          "op":"resolve-ejs"
        },

        // Add/edit fields to add-edit forms
        {
          "if": "<%=vars.newElementInfo.type === 'edit' %>",        
          op: 'insert',
          position: 'before',
          newlineBefore: false,
          anchorPoint: '<!-- Add/Edit field insertion point -->',
          value: '<%- vars.newElementInfo.fieldElements %>'
        },
      ],

      "<%=vars.newElementInfo.destination.file%>":[

        // Straight element. It will position place it in the right spot, if so requested 
        {
          "if": "<%=vars.newElementInfo.type === 'plain' && vars.newElementInfo.insertElement%>",
          "op": "insert",
          "position": "before",
          "newlineAfter": false,
          "anchorPoint": "/* Loaded modules -- end */",
          "value": "import '<%=vars.newElementInfo.importPath%>'"
        },
        {
          "if": "<%=vars.newElementInfo.type === 'plain' && vars.newElementInfo.insertElement%>",
          "op": "insert",
          "position": "before",
          "newlineAfter": false,
          "newlineBefore": false,
          "anchorPoint": "<!-- Element insertion point -->",
          "value":"<<%=vars.newElementInfo.nameWithPrefix%>></<%=vars.newElementInfo.nameWithPrefix%>>"
        },

        // Root page. Add element to the page, as well as (maybe) the import and (maybe) in the drawer
        {
          "if":"<%=vars.newElementInfo.type === 'root-page' && !userInput['client-app-element'].tailEnd%>",
          "op":"insert",
          "position":"before",
          "newlineBefore":false,
          "anchorPoint":"<!-- App pages -- end -->",
          "value":"<<%=vars.newElementInfo.nameWithPrefix%> class=\"page\" ></<%=vars.newElementInfo.nameWithPrefix%>>"
        },
        {
          "if":"<%=vars.newElementInfo.type === 'root-page' && userInput['client-app-element'].tailEnd%>",
          "op":"insert",
          "position":"after",
          "newlineBefore":false,
          "anchorPoint":"<!-- App pages -- end -->",
          "value":"<<%=vars.newElementInfo.nameWithPrefix%> class=\"page\" ></<%=vars.newElementInfo.nameWithPrefix%>>"
        },
        {
          "if":"<%=vars.newElementInfo.type === 'root-page'%>",
          "op":"insert",
          "position":"before",
          "newlineBefore":false,
          "anchorPoint":"/* Extra app modules -- end */",
          "value":"<%=vars.newElementInfo.uncommentedStaticImport ? '' : '// '%>import './pages/<%=vars.newElementInfo.nameWithPrefix%>.js'"
        },
        {
          "if":"<%=vars.newElementInfo.type === 'root-page' && !vars.newElementInfo.notInDrawer%>",
          "op":"insert",
          "position":"before",
          "newlineBefore":false,
          "anchorPoint":"<!-- Drawer contents -- end -->",
          "valueFromFile":"drawerEntry.js"
        },

        // Page (NON-root). Add element to the page, as well as (maybe) the import and (maybe) in the drawer
        {
          "if":"<%=vars.newElementInfo.type === 'page'%>",
          "op": "insert",
          "position": "before",
          "newlineAfter": true,
          "newlineBefore": false,
          "anchorPoint": "<!-- Page tab insertion point -->",
          "value":"<<%=vars.newElementInfo.nameWithPrefix%> routing-group=\"<%=vars.newElementInfo.destination.pagePath%>\" slot=\"content\"></<%=vars.newElementInfo.nameWithPrefix%>>"
        },
        {
          "if":"<%=vars.newElementInfo.type === 'page'%>",
          "op": "insert",
          "position": "before",
          "newlineAfter": false,
          "anchorPoint": "/* Loaded modules -- end */",
          "value": "import '<%=vars.newElementInfo.importPath%>'"
        },
        {
          "if":"<%=vars.newElementInfo.type === 'page'%>",
          "op": "insert",
          "position": "before",
          "newlineAfter": true,
          "newlineBefore": false,
          "anchorPoint": '<!-- Page tab heading insertion point -->',
          "value":"<a name=\"<%=vars.newElementInfo.nameNoPrefix%>\" href=\"<%=vars.newElementInfo.destination.pagePath%><%=vars.newElementInfo.subPath%>\"><div><%=scaffoldizerUtils.capitalize(vars.newElementInfo.nameNoPrefix)%></div></a>"
        },
        {
          "if":"<%=vars.newElementInfo.type === 'page'%>",
          "op":"custom",
          "function":"maybeAddStarToPath"
        }
      ]
    }
  }
}
